version: '3.8'

services:
  breadcrumbs-test:
    container_name: claude-plugin-test   # Named container for easy reference
    build:
      context: ..
      dockerfile: test/Dockerfile
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
    stdin_open: true
    tty: true
    volumes:
      # Persist Claude auth and settings between sessions
      - claude-data:/home/tester/.claude
      # Mount plugin source for live development
      - ..:/home/tester/plugin-source:ro

# Named volume persists across container restarts
volumes:
  claude-data:
